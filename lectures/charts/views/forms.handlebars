<div class="container">
    <h1>Shopping Simulator</h1>
    <form>
        <div class="form-group row">
            <label for="exampleFormControlSelect2" class="col-sm-2 col-form-label">Apples ($0.50)</label>
            <select name="apple" class="form-control col-sm-10" id="exampleFormControlSelect2">
                <option>0</option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
            </select>
        </div>
        <div class="form-group row">
            <label for="exampleFormControlSelect2" class="col-sm-2 col-form-label">Pepsi ($1.00)</label>
            <select name="pepsi" class="form-control col-sm-10" id="exampleFormControlSelect2">
                <option>0</option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
            </select>
        </div>
        <div class="form-group row">
            <label for="exampleFormControlSelect2" class="col-sm-2 col-form-label">Ramen ($5.50)</label>
            <select name="ramen" class="form-control col-sm-10" id="exampleFormControlSelect2">
                <option>0</option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
            </select>
        </div>
        <div class="form-group row">
            <label for="exampleFormControlSelect2" class="col-sm-2 col-form-label">Milk ($3.25)</label>
            <select name="milk" class="form-control col-sm-10" id="exampleFormControlSelect2">
                <option>0</option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
            </select>
        </div>

        <div>
            <b>Total: </b> <i id="total">$0.00</i>
        </div>
        <button class="purchase btn btn-primary mb-2">Purchase!</button>
    </form>
</div>


<script>
    $(".purchase").on("click", function (e) {
        e.preventDefault()
        let formdata = ($("form").serializeArray())
        $.post("/purchase", formdata, function(data){
            if(data){
                alert("You bought some stuff!")
            }
        })
    })

    $("select").on("click", function (e) {
        let purchases = $("form").serializeArray()
        let total = 0
        for (var item of purchases) {
            if (item.name == 'apple') {
                total += item.value * 0.50
            } else if (item.name == 'pepsi') {
                total += item.value * 1
            } else if (item.name == 'ramen') {
                total += item.value * 5.50
            } else if (item.name == 'milk') {
                total += item.value * 3.25
            } else {

            }
        }
        $("#total").html('$'+total)
    })
</script>